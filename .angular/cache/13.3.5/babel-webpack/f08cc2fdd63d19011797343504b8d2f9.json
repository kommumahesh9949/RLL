{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { Validators } from \"@angular/forms\";\nlet UserHomeComponent = class UserHomeComponent {\n  constructor(formBuilder, router, userService) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.userService = userService;\n    this.bus = null;\n    this.notFound = null;\n    this.found = false;\n    this.userId = null;\n    this.user = null;\n    /* bus search form */\n\n    this.searchForm = this.formBuilder.group({\n      arrivalBusstop: [null, Validators.required],\n      departureBusstop: [null, Validators.required],\n      date: [null, [Validators.required, this.dateValidator]]\n    });\n  }\n\n  ngOnInit() {\n    this.userId = localStorage.getItem(\"userId\");\n    console.log(this.userId);\n\n    if (this.userId == null) {\n      this.router.navigate([\"/error\", \"not logged in, login to continue\"]);\n    } else {\n      this.userId = parseInt(this.userId);\n      this.userService.getUser(this.userId).subscribe(data => {\n        this.user = data;\n      }, error => {\n        this.router.navigate([\"/error\", \"not logged in, login to continue\"]);\n      });\n    }\n  }\n  /* ------method to search bus--------- */\n\n\n  search() {\n    console.log(this.searchForm.get(\"date\").value);\n    this.userService.searchBus(this.searchForm.get(\"departureBusstop\").value, this.searchForm.get(\"arrivalBusstop\").value, this.searchForm.get(\"date\").value).subscribe(data => {\n      this.bus = data;\n      console.log(this.bus);\n\n      if (this.bus) {\n        this.notFound = null;\n        this.found = true;\n      } else {\n        this.notFound = \"no bus found\";\n        this.found = false;\n      }\n    }, error => {\n      this.notFound = \"no bus found\";\n      this.found = false;\n    });\n  }\n  /* method to validate date */\n\n\n  dateValidator(control) {\n    const inputDate = new Date(control.value);\n    const currentDate = new Date();\n\n    if (inputDate < currentDate) {\n      return {\n        dateError: true\n      };\n    }\n\n    return null;\n  }\n\n  logout() {\n    localStorage.removeItem(\"userId\");\n    this.router.navigate([\"/userLogin\"]);\n  }\n\n  getBookings() {\n    this.router.navigate([\"/getBookingByUser\", this.userId]);\n  }\n\n  addPassengers() {\n    this.router.navigate([\"/addPassengers\", this.bus.busNumber]);\n  }\n\n};\nUserHomeComponent = __decorate([Component({\n  selector: \"app-user-home\",\n  templateUrl: \"./user-home.component.html\",\n  styleUrls: [\"./user-home.component.css\"]\n})], UserHomeComponent);\nexport { UserHomeComponent };","map":null,"metadata":{},"sourceType":"module"}